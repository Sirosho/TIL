

# **AWS EC2 (Elastic Compute Cloud) 개요**


## **1. EC2(Elastic Compute Cloud)란?**

  - **EC2**는 AWS 클라우드에서 **확장 가능한 가상 서버(인스턴스)를 제공하는 서비스**다.
  - 사용자는 필요에 따라 서버를 자유롭게 생성, 확장, 축소할 수 있어 컴퓨팅 자원을 효율적으로 관리할 수 있다.

### **EC2 인스턴스 특징**

  - **인스턴스 유형**: CPU, 메모리, 스토리지 등 다양한 사양을 갖춘 인스턴스 유형을 제공한다. (예: 범용, 컴퓨팅 최적화, 메모리 최적화)
  - **운영 체제**: Windows, Linux 등 다양한 운영 체제를 선택할 수 있다.
  - **요금**: 사용한 만큼만 지불하는 **온디맨드 방식**이 기본이다.

-----

## **2. EC2 인스턴스 생성 및 연결**

### **1단계: 인스턴스 생성**

1.  **AMI(Amazon Machine Image) 선택**: 서버에 설치할 운영 체제와 기본 소프트웨어가 포함된 템플릿을 선택한다.
2.  **인스턴스 유형 선택**: CPU, 메모리 등 원하는 사양을 선택한다.
3.  **네트워크 설정**: VPC, 서브넷 등 네트워크 환경을 구성한다.
4.  **스토리지 추가**: 서버에 연결할 EBS(Elastic Block Store) 볼륨의 크기를 지정한다.
5.  **보안 그룹 설정**: 방화벽 역할을 하는 보안 그룹을 설정하여 인스턴스에 대한 인바운드/아웃바운드 트래픽 규칙을 정의한다. 웹 서버 구축 시 HTTP(80번 포트) 및 HTTPS(443번 포트)를 허용해야 한다.
6.  **키 페어 생성**: 인스턴스에 안전하게 접속하기 위한 **SSH 키 페어**를 생성하고 `.ppk` 파일을 다운로드한다.

### **2단계: 인스턴스 연결 (PuTTY 사용)**

1.  **PuTTYgen 실행**: 다운로드한 `.pem` 파일을 PuTTY에 사용할 수 있는 `.ppk` 파일로 변환한다.
      - PuTTYgen을 열어 'Load' 버튼을 누른 후, `.pem` 파일을 선택하고 'Save private key'를 클릭해 `.ppk` 파일을 저장한다.
2.  **PuTTY 실행**: PuTTY를 열고 연결 정보를 입력한다.
3.  **세션 설정**:
      - **Host Name**: `ubuntu@EC2_퍼블릭_IP` 형식으로 입력한다.
      - **Port**: 기본값인 22를 사용한다.
4.  **SSH 키 파일 설정**:
      - 왼쪽 카테고리에서 'SSH' -\> 'Auth'로 이동한다.
      - 'Browse...' 버튼을 클릭하여 PuTTYgen으로 변환한 `.ppk` 파일을 선택한다.
5.  **접속**: 'Open' 버튼을 클릭하여 인스턴스에 접속한다.

-----



## **인바운드 및 아웃바운드 트래픽 규칙**


AWS 보안 그룹(Security Group)에서 **인바운드(Inbound)** 및 **아웃바운드(Outbound)** 트래픽 규칙은 가상 서버(EC2 인스턴스)로 들어오고 나가는 네트워크 트래픽을 제어하는 방화벽 규칙이다.  이는 네트워크 보안의 가장 기본적인 요소이다.

| 구분 | 인바운드 규칙 (Inbound Rules) | 아웃바운드 규칙 (Outbound Rules) |
| :--- | :--- | :--- |
| **정의** | **외부**에서 **인스턴스 내부**로 들어오는 트래픽에 대한 규칙 | **인스턴스 내부**에서 **외부**로 나가는 트래픽에 대한 규칙 |
| **목적** | 인스턴스에 대한 **접근 허용** | 인스턴스에서 외부 서비스로의 **연결 허용** |
| **주요 용도** | - **웹 서비스(HTTP/HTTPS)**: 웹 사이트 방문자 접속 허용<br>- **SSH/RDP**: 관리자 원격 접속 허용<br>- **애플리케이션 포트**: 데이터베이스나 애플리케이션 포트 접속 허용 | - **소프트웨어 업데이트**: 패키지 매니저를 통한 업데이트<br>- **외부 API 호출**: 외부 서비스에 데이터 전송<br>- **로그 전송**: 모니터링 서비스로 로그 전송 |
| **기본 설정** | 기본적으로 모든 인바운드 트래픽을 \*\*거부(Deny)\*\*한다. | 기본적으로 모든 아웃바운드 트래픽을 \*\*허용(Allow)\*\*한다. |
| **예시** | `80번 포트 (HTTP)`를 모든 IP(`0.0.0.0/0`)에 대해 `허용(Allow)`한다. | `모든 트래픽(All traffic)`을 모든 IP(`0.0.0.0/0`)에 대해 `허용(Allow)`한다. |



### **주요 네트워크 프로토콜 종류 및 특징** ---

| 프로토콜 | 특징 | 용도 |
| :--- | :--- | :--- |
| **HTTP**<br>(Hypertext Transfer Protocol) | 웹 브라우저와 웹 서버 간 데이터 통신을 위한 프로토콜. 텍스트 기반으로 동작하며, 요청-응답 방식으로 데이터를 주고받는다. | 웹 페이지 열람, 웹 애플리케이션 접속, 웹 서버와 클라이언트 간 통신 |
| **HTTPS**<br>(Hypertext Transfer Protocol Secure) | HTTP에 \*\*보안(SSL/TLS)\*\*을 추가하여 데이터를 암호화한 프로토콜. 중간에서 데이터를 가로채도 내용을 알 수 없어 안전하다. | 온라인 뱅킹, 전자상거래, 로그인 등 **보안이 중요한** 웹 통신 |
| **FTP**<br>(File Transfer Protocol) | 클라이언트와 서버 간에 파일을 전송하기 위한 프로토콜. 텍스트와 바이너리 파일을 모두 지원한다. | 웹 서버에 파일 업로드, 파일 다운로드, 대용량 데이터 전송 |
| **SSH**<br>(Secure Shell) | 원격 컴퓨터에 **안전하게 접속**하여 명령을 실행하는 프로토콜. 데이터가 암호화되어 보안성이 높다. | EC2 인스턴스 등 서버 원격 제어 및 관리 |
| **TCP**<br>(Transmission Control Protocol) | **신뢰성**을 중요시하는 프로토콜. 데이터 전송 전에 연결을 수립하고, 데이터가 손실되지 않도록 보장한다. | 파일 전송, 웹 브라우징(HTTP/HTTPS), 이메일 등 **정확한 데이터 전달**이 필요한 통신 |
| **UDP**<br>(User Datagram Protocol) | **속도**를 중요시하는 프로토콜. 연결을 수립하지 않고 데이터를 전송하며, 데이터 손실이 발생할 수 있다. | 실시간 동영상 스트리밍, 온라인 게임, DNS(Domain Name System) |
| **ICMP**<br>(Internet Control Message Protocol) | 인터넷 프로토콜(IP)에서 발생하는 오류를 알리거나 네트워크 상태를 진단하는 데 사용되는 프로토콜. | `ping`이나 `traceroute` 명령어를 이용한 네트워크 연결 상태 확인 |


## **네트워크 통신과 보안의 통합적 이해**


### **1. 네트워크 통신의 기본 원리: OSI 7계층과 프로토콜**
네트워크 통신은 복잡한 과정을 7개의 계층으로 나눈 **OSI 7계층 모델**을 기반으로 이루어집니다. 각 계층은 독립적인 역할을 수행하며 데이터를 순차적으로 처리합니다. 이 과정에서 각 계층의 규칙, 즉 **프로토콜**이 사용됩니다.

* **애플리케이션 계층 (Layer 7)**: 사용자가 직접 사용하는 서비스와 관련됩니다. **HTTP**(웹), **SSH**(원격 접속), **FTP**(파일 전송) 등이 여기에 속합니다.
* **전송 계층 (Layer 4)**: 데이터를 작게 나누고(세그먼트/데이터그램), 전달 방식을 결정합니다. **TCP**는 신뢰성을 보장하고, **UDP**는 속도를 우선합니다. HTTP와 SSH는 데이터의 정확성을 위해 TCP를 기반으로 합니다.
* **네트워크 계층 (Layer 3)**: 데이터에 **IP 주소**를 붙여 **패킷**으로 만들고, 최적의 경로를 찾아 전송합니다.
* **물리/데이터 링크 계층 (Layer 1, 2)**: 실제 물리적 네트워크 장치를 통해 데이터를 전기적 신호로 변환하여 전송합니다.

### **2. 포트와 애플리케이션의 연결**
네트워크에서 **포트**는 IP 주소 내에서 특정 서비스를 구분하는 논리적 통로입니다. IP 주소가 컴퓨터의 주소라면, 포트는 그 컴퓨터 안의 특정 서비스로 가는 '방 번호'입니다.

* **정의된 포트**: HTTP(80), SSH(22)처럼 특정 서비스에 할당된 포트가 있습니다.
* **애플리케이션 포트**: 개발자가 만든 애플리케이션(예: 스프링 서버)은 외부 요청을 받기 위해 특정 포트(예: 8080)를 사용하도록 설정됩니다. 이는 "내 애플리케이션은 8080번 포트로 들어오는 요청만 처리하겠다"는 내부적인 약속입니다.

### **3. 보안 그룹의 역할**
**보안 그룹**은 클라우드 서버(EC2)의 **가상 방화벽**입니다. 이 방화벽은 인스턴스로 들어오고 나가는 모든 트래픽을 제어합니다. 보안 그룹의 핵심 역할은 **인바운드 규칙**을 통해 허가되지 않은 통신을 차단하는 것입니다.

* **인바운드 규칙 설정**: 인바운드 규칙은 **어떤 프로토콜**을 사용하고, **어떤 포트**로 들어오는 트래픽을 허용할지 정의합니다.
* **예시**: 웹 서버를 운영하기 위해서는, 모든 IP(`0.0.0.0/0`)에 대해 **HTTP(TCP 포트 80)**와 **HTTPS(TCP 포트 443)**를 허용하는 규칙을 설정해야 합니다.

---

### **4. 종합적인 작동 시나리오**
모든 요소는 유기적으로 연결되어 작동합니다. 

1.  **애플리케이션 준비**: 당신의 스프링 웹 서버는 `8080`번 포트에서 요청을 기다리고 있습니다.
2.  **보안 그룹 설정**: 서버의 보안 그룹에 **TCP 프로토콜**을 사용하는 `8080`번 포트로의 접속을 허용하는 인바운드 규칙을 추가합니다.
3.  **사용자 요청**: 사용자가 웹 브라우저에 `http://[서버 IP]:8080`을 입력하면, 사용자의 컴퓨터는 TCP 프로토콜을 사용해 서버의 `8080`번 포트로 요청을 보냅니다.
4.  **요청 처리 과정**:
    * 요청이 서버에 도달하면 가장 먼저 **보안 그룹**을 통과해야 합니다.
    * 보안 그룹은 설정된 규칙을 확인하고, `8080`번 포트로의 TCP 통신이 허용되었으므로 요청을 통과시킵니다.
    * 보안 그룹을 통과한 요청은 서버 내부의 `8080`번 포트로 전달되고, 그곳에서 대기하고 있던 스프링 애플리케이션이 요청을 받아 처리합니다.

이처럼, **보안 그룹**은 외부의 위협으로부터 서버를 보호하는 첫 번째 관문 역할을 하고, **포트**는 이 관문을 통과한 요청을 정확한 애플리케이션으로 연결하는 통로 역할을 합니다.