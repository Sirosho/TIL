# **AWS EC2 IAM 역할 적용**

EC2 인스턴스에 IAM 역할(Role)을 부여하는 것은 **역할을 생성**하여 **권한을 정의**한 후, 해당 인스턴스에 그 역할을 **선택하여 연결**하는 과정이다.

## **IAM 역할 부여의 목적**

-   **보안 강화**: EC2 인스턴스에서 실행되는 애플리케이션이 AWS의 다른 서비스(예: S3, DynamoDB)에 접근할 때, **액세스 키를 인스턴스에 직접 저장하지 않기** 위해 사용된다.
-   **임시 자격 증명 제공**: AWS가 역할에 부여된 권한을 기반으로 **임시 보안 자격 증명**을 생성하고 관리하여 인스턴스가 안전하게 다른 서비스 API를 호출할 수 있도록 한다.

## **IAM 역할 적용 단계**

| 단계 | 행동 | 목적 |
| :--- | :--- | :--- |
| **1. IAM 역할 생성** | IAM 콘솔에서 새로운 역할을 생성한다. 신뢰할 수 있는 엔터티로 **'AWS 서비스'** 중 **'EC2'**를 지정한다. | 이 역할이 EC2 인스턴스에 의해 사용될 수 있도록 허용한다. |
| **2. 권한 정책 연결** | 생성된 역할에 애플리케이션이 수행해야 할 작업에 대한 **정책(Policy)**을 연결한다. (예: `AmazonS3ReadOnlyAccess`) | 역할이 **무엇**을 할 수 있는지 구체적인 권한을 정의한다. |
| **3. 인스턴스 연결** | EC2 인스턴스를 생성하거나, 이미 실행 중인 인스턴스의 '보안' 설정에서 **생성된 역할**을 **선택**하여 연결한다. | EC2 인스턴스가 해당 역할의 권한을 상속받아 AWS 서비스에 접근할 수 있도록 한다. |

## **결론**
**관리자**는 필요한 **권한(정책)**이 담긴 **역할**을 만들고, 인스턴스에 이 역할을 **할당**함으로써 인스턴스 내 애플리케이션의 AWS 서비스 접근을 안전하게 제어한다.





# EC2 탄력적 IP(Elastic IP, EIP) 개요 및 관리

##  탄력적 IP(EIP)의 전반적인 개념

| 항목 | 설명 |
| :--- | :--- |
| **정의** | **AWS 클라우드 컴퓨팅에서 정적인 공용 IPv4 주소**이다. |
| **목적** | EC2 인스턴스에 고정적인 공용 IP 주소를 제공하여, **인스턴스가 중지/시작되거나 장애로 인해 교체되어도 동일한 공용 IP 주소를 유지**할 수 있도록 한다. |
| **특징** | 인스턴스와 별개로 AWS 계정에 할당되며, **필요에 따라 다른 인스턴스나 네트워크 인터페이스에 자유롭게 연결 및 연결 해제**가 가능하다. |
| **용도** | IP 주소가 자주 변경되면 안 되는 **프로덕션 환경의 서버(웹 서버, DB 서버 등)**에 주로 사용된다. |

---

##  Public IP vs. Private IP

| 구분 | Public IP (공용 IP) | Private IP (사설 IP) |
| :--- | :--- | :--- |
| **범위** | 인터넷을 통해 접근 가능하며, 전 세계적으로 고유하다. | VPC(Virtual Private Cloud) 내부에서만 접근 가능하며, VPC 내에서 고유하다. |
| **지속성** | **일시적**이다. EC2 인스턴스가 중지되고 다시 시작되면 새로운 공용 IP가 할당된다 (EC2 인스턴스에 자동 할당된 경우). | **영구적**이다. 인스턴스가 중지/시작되어도 변경되지 않는다. |
| **EIP의 역할** | EC2의 **일시적인 공용 IP를 대체**하여 고정적인 공용 IP를 제공한다. | |

---

##  탄력적 IP 설정 방법

1.  **탄력적 IP 주소 할당:**
    * AWS 콘솔에서 **VPC > 탄력적 IP**로 이동한다.
    * **탄력적 IP 주소 할당** 버튼을 클릭하여 새로운 EIP를 발급받는다.
2.  **EC2 인스턴스에 연결:**
    * 할당된 EIP를 선택하고 **작업 > 탄력적 IP 주소 연결**을 선택한다.
    * 연결할 **인스턴스** 또는 **네트워크 인터페이스**를 지정하고 연결한다.
3.  **사용 완료 후 해제 및 릴리스 (과금 주의):**
    * EC2 인스턴스에서 EIP를 분리하려면, EIP를 선택하고 **작업 > 인스턴스 연결 해제**를 수행한다.
    * EIP를 더 이상 사용하지 않으면 **작업 > 탄력적 IP 릴리스(반납)**를 수행하여 AWS에 반납한다. **반드시 릴리스해야 과금이 발생하지 않는다.**

---

##  탄력적 IP 과금 주의 사항

탄력적 IP는 **사용의 효율성을 높이고 IP 주소의 낭비를 방지**하기 위해 특정 조건에서 시간당 약 **$0.005**의 비용이 과금된다.

| 과금 조건 | 설명 |
| :--- | :--- |
| **발급받고 EC2 인스턴스에 연결하지 않은 경우** | EIP를 할당받았으나 어떠한 인스턴스에도 연결하지 않고 방치할 경우 과금된다. |
| **EC2 인스턴스에 연결하였으나 인스턴스가 중지된 경우** | 인스턴스에 EIP가 연결된 상태라도, **인스턴스가 `stopped` 상태**인 경우 과금된다. |
| **연결된 인스턴스가 실행 중이더라도 두 번째 EIP인 경우** | 하나의 EC2 인스턴스에 **두 개 이상의 EIP가 연결된 경우**, 두 번째 EIP부터 과금될 수 있다. |

###  많이 실수하는 과금 시나리오 (필수 조치)

| 실수 시나리오 | 필수 조치 (과금 방지) |
| :--- | :--- |
| EC2 인스턴스를 삭제한 후 **탄력적 IP를 해방(반납)하지 않음** | 1. **탄력적 IP 탭 클릭** → 2. **반납할 IP 클릭** → 3. **작업** → 4. **인스턴스 연결 해제** → 5. **탄력적 IP 릴리스(반납)**를 수행해야 한다. |
| EIP는 **사용하지 않을 경우 반드시 릴리스**하여 불필요한 비용이 발생하는 것을 방지해야 한다. | |
