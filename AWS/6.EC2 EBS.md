# AWS Elastic Block Store (EBS) 개요 및 관리

##  EBS (Elastic Block Store) 개요 및 심화 특징

| 항목 | 설명 |
| :--- | :--- |
| **정의 및 역할** | **EC2 인스턴스에 연결하여 사용하는 영구적인 블록 스토리지**이다. 이는 컴퓨터에 연결하는 **물리적 하드 드라이브**와 개념적으로 동일하며, 파일 시스템을 사용하여 데이터를 저장한다. |
| **특징 1 (영구성)** | EBS 볼륨은 EC2 인스턴스의 수명과 별개로 존재한다. **인스턴스가 중지되거나 종료되어도 볼륨 내 데이터는 유지**된다. |
| **특징 2 (루트 볼륨)** | 대부분의 AMI는 인스턴스 시작 시 **EBS 루트 볼륨**을 생성하여 OS 및 기본 애플리케이션을 설치한다. 기본적으로 인스턴스 종료 시 루트 볼륨도 삭제되도록 설정되어 있으나, 이 설정은 변경 가능하다. |
| **특징 3 (가용 영역)** | EBS 볼륨은 특정 가용 영역(AZ)에 종속되며, **EC2 인스턴스와 반드시 동일한 가용 영역에 있어야만 연결 가능**하다. (예: `ap-northeast-2a`에 생성된 볼륨은 `ap-northeast-2b`의 인스턴스에 연결 불가). |
| **특징 4 (확장성)** | EC2 인스턴스 하나에 여러 개의 EBS 볼륨을 연결하여 **총 스토리지 용량을 확장**할 수 있다. |
| **특징 5 (성능 지표)** | EBS 볼륨은 **IOPS(초당 입출력 작업 수)** 및 처리량(Throughput)과 같은 성능 지표를 제공하며, 볼륨 유형에 따라 성능과 비용이 달라진다. |

---

## EBS 스냅샷 (Snapshot) 및 데이터 관리

| 항목 | 설명 |
| :--- | :--- |
| **개념** | **EBS 볼륨의 특정 시점 상태를 백업**하는 기능이다. 스냅샷은 Amazon S3에 저장되며, 증분 백업(Incremental Backup) 방식으로 작동한다. |
| **증분 백업 예시** | 첫 스냅샷은 모든 데이터를 저장하나, 이후 스냅샷은 **이전 스냅샷 이후 변경된 데이터 블록만** 저장한다. 이로 인해 백업 시간이 단축되고 스토리지 비용이 절감된다. |
| **용도 1 (복구)** | 스냅샷을 통해 백업 시점으로 볼륨을 복구하거나, 새로운 EBS 볼륨을 생성하여 **인스턴스를 복구 또는 복제**하는 데 사용된다. |
| **용도 2 (재해 복구/마이그레이션)** | 스냅샷을 다른 AWS 리전으로 복사하여 **재해 복구 환경을 구축**하거나, 다른 리전으로 데이터를 마이그레이션할 수 있다. |
| **자동화** | **데이터 수명 주기 관리자(DLM)** 정책을 설정하여 스냅샷 생성 및 보존 기간을 자동화함으로써 백업 관리 부담을 줄일 수 있다. |

---

## EBS 과금 주의 사항 및 관리 절차

### 1. 과금 원칙

* EBS 볼륨은 **볼륨이 프로비저닝된 용량**에 대해 시간당 비용이 부과되며, 스냅샷은 **S3에 저장된 용량**에 대해 비용이 부과된다.
* **주의 사항:** EC2 인스턴스를 삭제(Terminate)하더라도, **루트 볼륨 외의 추가 EBS 볼륨이나 인스턴스 종료 설정이 변경된 루트 볼륨은 자동으로 삭제되지 않고 유지**된다. **유지되는 볼륨에 대해서는 계속 비용이 청구**되므로, 사용하지 않는 볼륨은 반드시 삭제해야 한다.

### 2. 볼륨 생성 및 연결 실습 절차

1.  **볼륨 정보 확인:** EC2 콘솔 → **볼륨** 탭에서 기존 볼륨과 연결 인스턴스를 확인한다.
2.  **새 볼륨 생성:** **볼륨 생성** 버튼을 클릭하여 볼륨 유형, 크기, 그리고 **EC2와 동일한 가용 영역**을 지정한다.
3.  **암호화:** 필요시 AWS KMS를 이용해 볼륨 암호화를 설정한다.
4.  **인스턴스 연결:** 생성 완료된 볼륨 선택 → **작업 → 볼륨 연결** → 연결할 인스턴스를 선택하여 연결한다.
5.  **연결 확인:** 인스턴스 세부 정보의 **스토리지** 탭에서 연결된 볼륨(디바이스) 정보를 확인한다. (Linux 인스턴스의 경우, 운영체제 내부에서 해당 디바이스를 마운트해야 사용 가능하다.)

### 3. 볼륨 분리 및 삭제 실습 절차 (과금 방지 필수)

1.  **볼륨 분리:** 인스턴스에서 볼륨을 안전하게 **분리(Detach)**한다. 먼저 인스턴스 운영체제 내에서 마운트를 해제한 후, AWS 콘솔에서 **작업 → 볼륨 분리**를 수행한다.
2.  **볼륨 삭제:** 분리된 볼륨을 선택하고 **작업 → 볼륨 삭제**를 클릭하여 AWS 시스템에서 완전히 제거한다. **이 과정을 생략하면 비용이 지속 청구**된다.

### 4. 스냅샷 생성 및 복원 실습 절차

1.  **스냅샷 생성:** **스냅샷** 탭으로 이동하여 **스냅샷 생성**을 클릭하고 백업할 **원본 볼륨**을 선택한다.
2.  **볼륨 복원 (재생성):** 생성된 스냅샷 선택 → **작업 → 스냅샷에서 볼륨 생성**을 클릭하여 새로운 EBS 볼륨을 생성한다. 이 생성된 볼륨은 백업 시점의 데이터를 포함하며, 새로운 인스턴스에 연결하여 사용할 수 있다.