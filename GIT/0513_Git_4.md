
# Git 개념 및 명령어 정리 (restore / reset / revert)

---

## 🔄 git restore

파일이나 디렉토리를 과거 커밋 상태로 복원하는 명령어입니다.  
부분 복구가 가능하고, 작업 디렉토리와 인덱스(스테이징 영역)에 유연하게 적용할 수 있습니다.

### 🔹 기본 사용법

- `git restore <file>`  
  → 해당 파일을 **직전 커밋 상태**로 되돌립니다.

- `git restore --source <commit-hash> <fileName>`  
  → 특정 커밋을 기준으로 해당 파일을 복원합니다.

- `git restore --source HEAD~2 <filename>`  
  → HEAD보다 2개 전 커밋 기준으로 파일을 복구합니다.

- `git restore --source <branch> <fileName>`  
  → 다른 브랜치의 상태로 해당 파일을 복원할 수 있습니다.

### 🔹 스테이징 해제

- `git restore --staged <file>`  
  → 스테이징된 파일을 **unstage** 상태로 되돌립니다. (`git add` 취소)

---

## 🔁 git reset

`git reset`은 브랜치의 HEAD(현재 커밋 포인터)를 **과거 커밋으로 이동**시키는 명령입니다.  
동시에 스테이징 영역(index)과 작업 디렉토리(working directory)의 상태도 **옵션에 따라** 변경됩니다.  
주로 **로컬 작업**에서 실수한 커밋을 되돌릴 때 사용합니다.

### 🔹 기본 사용법

- `git reset <commit-hash>`  
  → HEAD를 해당 커밋으로 이동시킴

### 🔹 reset 모드 종류

| 옵션          | 설명 |
|---------------|------|
| `--soft`      | HEAD는 이동하지만, **작업 디렉토리와 스테이징 영역은 그대로 유지**됨 |
| `--mixed`     | HEAD 이동 + **스테이징 해제**, 작업 디렉토리는 그대로 (기본 옵션) |
| `--hard`      | HEAD 이동 + 스테이징 영역 + 작업 디렉토리까지 **모두 초기화** |

### 🔹 reset 실수 복구

- `git reset --hard ORIG_HEAD`  
  → 직전 reset 명령을 취소하여 복구

- `git reset --hard HEAD`  
  → 현재 커밋 상태로 작업 디렉토리를 덮어씀 (파일 초기화)

### 🔹 git restore . vs git reset --hard

| 비교 항목     | `git restore .`                  | `git reset --hard`                      |
|----------------|----------------------------------|------------------------------------------|
| 대상           | **작업 디렉토리의 파일만 복구**    | **커밋, 스테이징, 작업 디렉토리 전체 복구** |
| 사용 목적       | 변경된 파일만 롤백               | 전체 상태를 완전히 되돌릴 때 사용       |

✅ `git restore`는 **부분적으로**, `git reset`은 **전체적으로** 되돌릴 때 주로 사용됩니다.

---

## ♻️ git revert

`git revert`는 특정 커밋을 취소하는 **새로운 커밋을 생성**하여, 변경 이력을 보존하면서 되돌리는 방식입니다.  
**공동 작업 환경**에서 안전하게 사용되며, 협업 시 필수적으로 고려해야 할 명령입니다.

### 🔹 특징

- 원래 커밋은 그대로 남고, 해당 커밋을 취소하는 **반대 커밋이 생성**됨
- 기록을 **깨끗하게 유지**할 수 있음
- `git reset`과 달리 협업 환경에서도 안전

### 🔹 예시

```bash
git revert <commit-hash>
```

→ 해당 커밋의 변경 내용을 취소하는 새로운 커밋을 생성

---

## 📌 reset vs revert 차이점

| 항목             | `git reset`                          | `git revert`                           |
|------------------|---------------------------------------|----------------------------------------|
| 기록 유지        | ❌ 기존 커밋을 지움 (삭제됨)           | ✅ 기록은 남기고 되돌리는 커밋 생성       |
| 협업에 적합성    | ❌ 위험 (히스토리 충돌 우려)           | ✅ 안전하게 협업 가능                    |
| 브랜치 이력      | 커밋 이력에서 사라짐                  | 커밋 이력에 되돌린 흔적이 남음         |
| 주 사용 상황     | 로컬 작업 되돌리기                   | 팀 프로젝트에서 실수 커밋 되돌리기      |
| 명령 실행 결과   | HEAD가 이동함                        | 새로운 커밋이 생성됨                    |

### ✅ 결론

- `reset`은 보통 **개인 작업용**  
- `revert`는 보통 **협업 환경에서 안전하게 커밋을 되돌릴 때** 사용

---

## 🧠 기타 유용한 팁

### 🔹 git switch -

- 직전에 있던 브랜치로 돌아가기

```bash
git switch -
```

### ✅ `git reset HEAD <file>`

- 특정 파일만 스테이징에서 해제 (unstage)

```bash
git reset HEAD <file>
```

→ `git restore --staged <file>` 와 같은 역할

---

<br><br><br><br><br>
