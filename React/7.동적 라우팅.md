# URL 파라미터 사용하기 (`:id`)

## URL 파라미터의 개념

\*\*URL 파라미터(URL Parameter)\*\*는 URL 경로의 특정 부분을 변수처럼 사용하여 동적인 데이터를 전달하는 방식이다. 이를 통해 하나의 라우트 경로 설정으로 여러 종류의 콘텐츠를 표시할 수 있다.

예를 들어, `/posts`는 모든 게시글 목록을 의미하고, `/posts/123`은 고유 ID가 `123`인 특정 게시글을 의미하도록 URL 구조를 설계할 수 있다.

-----

## URL 파라미터의 필요성

  * **동적 데이터 표현**: 수많은 상품이나 게시글에 대해 각각의 고정된 URL을 생성하는 것은 비효율적이다. URL 파라미터를 사용하면 하나의 컴포넌트로 다양한 데이터를 렌더링할 수 있다.
  * **의미 있는 URL 구조**: `/product?id=1`과 같은 쿼리 스트링 방식보다 `/product/1`과 같이 계층적이고 의미가 명확한 URL 구조를 설계할 수 있어 사용자 경험과 검색 엔진 최적화(SEO)에 유리하다.

-----

## URL 파라미터 설정 및 사용

### 1\. 라우트 설정

`createBrowserRouter`에서 라우트 객체의 `path` 속성을 정의할 때, 콜론(`:`)으로 시작하는 문자열을 사용하여 URL 파라미터를 설정한다.

```javascript
const router = createBrowserRouter([
  {
    path: '/',
    element: <RootLayout />,
    children: [
      {
        path: '/blog/:postId', // :postId 부분이 URL 파라미터가 된다.
        element: <BlogPost />
      }
    ]
  }
]);
```

위 설정에서 `:postId`는 `postId`라는 이름의 파라미터이며, `/blog/1`, `/blog/react-summary` 등 다양한 값을 받을 수 있다.

### 2\. 파라미터 값 사용

컴포넌트 내에서는 `useParams` 훅을 사용하여 URL 파라미터의 실제 값에 접근할 수 있다.

```javascript
import { useParams } from 'react-router-dom';

function BlogPost() {
  const params = useParams(); // { postId: '...' } 형태의 객체를 반환한다.
  const { postId } = params;

  // postId를 사용하여 데이터를 가져오는 등의 로직을 수행한다.

  return <div>현재 게시글 ID: {postId}</div>;
}
```

-----

## 고급 활용

  * **여러 파라미터 사용**: `path: '/blog/:category/:postId'`와 같이 여러 개의 파라미터를 하나의 경로에 설정할 수 있다.
  * **선택적 파라미터**: `path: '/products/:category?'`와 같이 파라미터 이름 뒤에 물음표(`?`)를 붙이면 해당 파라미터는 선택 사항이 된다.
  * **정규식을 이용한 제한**: `path: '/users/:userId(\d+)'`와 같이 정규식을 사용하여 파라미터가 특정 패턴(예: 숫자만)과 일치할 때만 라우트가 활성화되도록 제한할 수 있다.

-----

## 주의사항

라우트 경로의 순서가 중요하다. `/blog/new`와 `/blog/:id`가 함께 존재할 경우, `/blog/new`를 더 먼저 정의해야 한다. 그렇지 않으면 React Router가 `new`를 `:id` 파라미터의 값으로 잘못 인식할 수 있다.

-----

## 정리

  * URL 파라미터는 동적인 경로를 처리하기 위한 핵심 기능이다.
  * `path`에서는 콜론(`:`)으로 파라미터를 정의하고, 컴포넌트에서는 `useParams` 훅으로 값을 사용한다.
  * 이를 통해 하나의 컴포넌트를 재사용하여 다양한 콘텐츠를 효율적으로 렌더링하는 것이 가능하다.





<div style="margin-top:100px;"></div>





# useParams로 파라미터 활용하기



## `useParams`란?

\*\*`useParams`\*\*는 React Router가 제공하는 훅(Hook)으로, 현재 URL에 포함된 동적 파라미터(dynamic parameter)의 값을 객체 형태로 가져오는 역할을 한다. 이를 통해 컴포넌트는 URL 경로에서 변수 값을 추출하여 사용할 수 있다.

-----

## 사용 방법

`useParams` 훅을 컴포넌트 내에서 호출하면, 현재 라우트 경로에 매칭된 파라미터들을 키(key)-값(value) 쌍으로 포함하는 객체가 반환된다. 객체의 키는 라우트 설정 시 정의한 파라미터 이름(예: `:postId`)과 일치한다.

```javascript
// 라우트 설정: path: '/blog/:postId'

import { useParams } from 'react-router-dom';

function BlogPost() {
  // useParams()는 { postId: '...' } 형태의 객체를 반환한다.
  const params = useParams();

  return (
    <div>
      <h1>글 번호: {params.postId}</h1>
    </div>
  );
}
```

### 여러 파라미터 사용

하나의 경로에 여러 파라미터가 정의된 경우, `useParams`는 모든 파라미터를 포함하는 단일 객체를 반환한다.

```javascript
// 라우트 설정: path: '/blog/:category/:postId'

function BlogPost() {
  const params = useParams();
  // params = { category: 'react', postId: '123' }

  return (
    <div>
      <h2>카테고리: {params.category}</h2>
      <h3>글 번호: {params.postId}</h3>
    </div>
  );
}
```



## 실전 활용

### 구조 분해 할당

객체 구조 분해 할당을 사용하면 코드를 더 간결하게 작성할 수 있다.

```javascript
function BlogPost() {
  const { postId, category } = useParams();
  // ...
}
```

### 데이터 로딩

`useEffect` 훅과 함께 사용하여, URL 파라미터 값이 변경될 때마다 해당 값으로 새로운 데이터를 가져오는 로직을 구현할 수 있다.

```javascript
import { useState, useEffect } from 'react';
import { useParams } from 'react-router-dom';

function BlogPost() {
  const { postId } = useParams();
  const [post, setPost] = useState(null);

  useEffect(() => {
    // postId를 이용해 특정 게시글 데이터를 가져온다.
    fetch(`/api/posts/${postId}`)
      .then(res => res.json())
      .then(data => setPost(data));
  }, [postId]); // postId가 변경될 때마다 이 effect가 다시 실행된다.

  // ...
}
```

-----

## 주의사항

  * **타입 변환**: URL 파라미터는 항상 **문자열(string)** 타입으로 반환된다. 숫자 연산이 필요한 경우 `Number()` 또는 `parseInt()`를 사용하여 명시적으로 타입을 변환해야 한다.
  * **유효성 검증**: 파라미터 값이 존재하지 않거나(`undefined`), 예상치 못한 형식일 수 있으므로 항상 유효성을 검증하는 방어 코드를 작성하는 것이 좋다.
  * **에러 처리**: 존재하지 않는 ID를 파라미터로 받는 등, 유효하지 않은 파라미터 값에 대한 에러 처리 로직을 반드시 구현해야 한다.

-----

## 정리

  * `useParams`는 URL 경로의 동적인 값을 컴포넌트 내에서 쉽게 사용할 수 있도록 하는 훅이다.
  * 반환값은 파라미터 이름을 키로 갖는 객체 형태이다.
  * 모든 파라미터 값은 문자열 타입이므로 필요시 타입 변환이 요구된다.

  <div style="margin-top:100px;"></div>











# 검색 쿼리 다루기 (useSearchParams)


## 검색 쿼리(Query)란?

**검색 쿼리(Search Query)** 또는 쿼리 스트링(Query String)은 URL의 `?` 뒤에 오는 부분으로, `key=value` 쌍의 형태로 데이터를 전달하는 방식이다. 주로 웹 페이지의 콘텐츠를 필터링, 정렬하거나 페이지 번호를 지정하는 등 부가적인 옵션을 전달할 때 사용된다.

예: `/products?category=electronics&sort=price_asc`

-----

## `useSearchParams` 훅

`useSearchParams`는 React Router가 제공하는 훅으로, URL의 검색 쿼리 파라미터를 읽고 수정할 수 있는 기능을 제공한다. 이 훅은 배열을 반환하며, 첫 번째 요소는 현재 검색 쿼리를 다루는 `URLSearchParams` 객체이고 두 번째 요소는 쿼리를 업데이트하는 함수이다.

```javascript
import { useSearchParams } from 'react-router-dom';

function ProductList() {
  // searchParams: 읽기용 객체
  // setSearchParams: 쓰기용 함수
  const [searchParams, setSearchParams] = useSearchParams();

  // 쿼리 파라미터 읽기
  const category = searchParams.get('category'); // 'electronics'
  const sort = searchParams.get('sort');         // 'price_asc'
}
```

-----

## 주요 메서드

### 쿼리 파라미터 읽기 (`searchParams`)

  * **`.get(key)`**: 주어진 키(key)에 해당하는 첫 번째 값을 문자열로 반환한다. 값이 없으면 `null`을 반환한다.
  * **`.getAll(key)`**: 주어진 키에 해당하는 모든 값을 배열로 반환한다. (예: `?color=red&color=blue`)
  * **`.has(key)`**: 주어진 키가 존재하는지 여부를 불리언(boolean) 값으로 반환한다.

### 쿼리 파라미터 수정 (`setSearchParams`)

`setSearchParams` 함수를 사용하여 URL의 검색 쿼리를 업데이트할 수 있다. 이 함수는 새로운 쿼리 객체를 인자로 받거나, 이전 상태를 받아 새로운 상태를 반환하는 함수를 인자로 받을 수 있다.

```javascript
// 1. 새로운 쿼리로 전체 교체
setSearchParams({ category: 'books', page: '1' });

// 2. 기존 쿼리를 유지하며 특정 값만 수정 또는 추가
setSearchParams(prevParams => {
  prevParams.set('sort', 'newest');
  return prevParams;
});
```

-----

## 실전 활용

### 검색 필터 구현

사용자의 입력에 따라 `setSearchParams`를 호출하여 URL을 동적으로 변경하고, 변경된 URL을 기준으로 컴포넌트를 리렌더링하여 필터링된 결과를 표시한다.

```javascript
function ProductFilter() {
  const [searchParams, setSearchParams] = useSearchParams();

  const handleCategoryChange = (e) => {
    const category = e.target.value;
    setSearchParams(prev => {
      if (category) {
        prev.set('category', category);
      } else {
        prev.delete('category'); // 값이 없으면 쿼리에서 제거
      }
      return prev;
    });
  };

  return (
    <select onChange={handleCategoryChange} value={searchParams.get('category') || ''}>
      {/* ... options */}
    </select>
  );
}
```

-----

## 주의사항

  * **문자열 타입**: `searchParams.get()`으로 얻는 모든 값은 **문자열**이다. 숫자나 불리언으로 사용해야 할 경우 반드시 형 변환이 필요하다.
  * **초기값 처리**: 특정 쿼리 파라미터가 URL에 존재하지 않을 경우를 대비하여, 논리 연산자(`||`) 등을 사용해 기본값을 설정하는 것이 좋다.

-----

## 정리

  * `useSearchParams`는 URL의 쿼리 스트링(`?key=value`)을 다루기 위한 훅이다.
  * 필터링, 정렬, 페이지네이션과 같이 페이지의 상태를 URL에 반영하고자 할 때 유용하다.
  * URL에 상태를 저장함으로써, 사용자가 URL을 공유하거나 새로고침해도 동일한 필터링 및 정렬 상태를 유지할 수 있다.


  ## serchParams의 데이터 요청 흐름

1.  **URL에서 파라미터 추출**: `useParams` 훅을 사용하여 현재 URL 경로에서 동적인 값(예: 게시글 ID)을 **'읽어온다'**.

2.  **API 요청 객체 생성**: 추출한 파라미터 값을 사용하여 API 서버에 보낼 **'요청을 조립한다'**. 이 값은 API 엔드포인트(endpoint)의 일부가 될 수도 있고, 요청 본문(body)에 포함될 수도 있다.